syntax = "proto3";

package order;

service OrderService {
  rpc CreateOrder (CreateOrderRequest) returns (CreateOrderResponse);
  rpc GetOrder (GetOrderRequest) returns (GetOrderResponse);
}

message Empty {}

message Item {
  string product_id = 1;
  int32 quantity = 2;
  string sku = 3;
  double price = 4;
  optional string product_name = 5;
}

message CreateOrderRequest {
  repeated Item items = 2;
}

message GetOrderRequest {
  int32 id = 1;
}

message GetOrderResponse {
  string id = 1;
  int32 user_id = 2;
  OrderStatus status = 3;
  string total = 4; // Decimal(12,2)
  repeated OrderItem items = 7;
}

message OrderItem {
  int32 id = 1;
  string order_id = 2;
  string product_id = 3;
  string product_name = 4;
  string product_sku = 5;
  int32 quantity = 6;
  string price = 7; // Decimal(12,2)
}

enum OrderStatus {
  PENDING   = 0;
  PAID      = 1;
  CANCELLED = 2;
  SHIPPED   = 3;
  COMPLETED = 4;
}

message CreateOrderResponse {
  string message = 1;
  string id = 2;
}